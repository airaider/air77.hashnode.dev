---
title: "코루틴(Coroutine)이 뭔데?"
datePublished: Mon Aug 19 2024 07:27:46 GMT+0000 (Coordinated Universal Time)
cuid: cm00obp79000b0ajy851ceifi
slug: coroutine
cover: https://cdn.hashnode.com/res/hashnode/image/stock/unsplash/tvHtIGbbjMo/upload/9d0c5fb0aa2d4d01d9e5855eb8a3736a.jpeg
tags: kotlin, coroutines, kotlin-coroutines

---

# 코루틴(Coroutine)이란?

코루틴은 비동기 프로그래밍에서 많이 사용되는 개념으로, 실행 중간에 중단되었다가 나중에 다시 이어서 실행할 수 있는 함수 또는 루틴을 말한다.

전통적인 함수는 호출되면 반환될 때까지 계속 실행되지만, 코루틴은 실행 중 원하는 시점에 일시 중단하고, 나중에 다시 재개할 수 있다.

이를 통해 비동기 작업이나 병렬 처리를 보다 효율적으로 처리할 수 있다.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1724052090256/5e9890b3-31df-4b39-addc-5f9fdae66e78.png align="center")

## 코루틴의 장점

1. **효율적인 자원 사용**: 코루틴은 특정 작업을 처리하는 동안 자원을 차지하지 않고 다른 작업을 실행할 수 있게 한다. CPU와 메모리를 효율적으로 사용할 수 있다.
    
2. **비동기 처리**: 비동기 작업을 쉽게 처리할 수 있어, I/O 작업이나 네트워크 요청 등에서 유용하게 사용된다.
    
3. **단순한 코드 구조**: 복잡한 비동기 코드를 간결하게 작성할 수 있다. 콜백 지옥(callback hell)을 피할 수 있다.
    

## 코루틴이 코틀린에서 핫한 이유

처음에 이름때문에 코틀린에서만 지원하는 줄 알았다

알고보니 Python, Javascript, Go 등 다른 언어에서도 지원하고 1958년에 처음 만들어진 용어이다 ㄷㄷ

코루틴은 여러 언어에서 지원되지만, 코틀린에서 특히 주목받는 이유가 있다.

1. 안드로이드 개발에서 코틀린은 공식언어로 채택이 되었으며 UI 스레드를 차단하지 않고 비동기 작업을 처리하는 데 매우 유용하기 때문이다.
    
2. 코틀린은 코루틴을 언어 차원에서 통합하고 있어, 다른 언어보다 직관적이고 간단하게 비동기 코드를 작성할 수 있다.
    
3. `kotlinx.coroutines` 라이브러리의 강력한 지원 덕분에 구조화된 동시성과 안전한 비동기 처리가 가능하다.
    
4. 마지막으로, Google과 JetBrains의 지원 덕분에 풍부한 자료와 커뮤니티 생태계가 형성되어 있어 개발자들이 쉽게 접근할 수 있다.
    

## 코루틴 예시 코드

아래는 Kotlin에서 코루틴을 사용하는 간단한 예제 코드이다.

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking {
    launch {
        println("메인 작업 시작: ${Thread.currentThread().name}")
        val result1 = async { fetchData(1) }
        val result2 = async { fetchData(2) }
        println("결과: ${result1.await()}와 ${result2.await()}")
        println("메인 작업 종료")
    }
}

suspend fun fetchData(id: Int): String {
    println("데이터 가져오기 시작 ($id): ${Thread.currentThread().name}")
    delay(2000L) // 비동기 I/O 작업을 시뮬레이션
    println("데이터 가져오기 완료 ($id)")
    return "데이터$id"
}
```

이 코드는 runBlocking을 사용해 코루틴을 실행하며, async로 두 개의 비동기 작업을 병렬로 실행한다.

각 작업은 fetchData 함수로, 2초 동안 비동기 작업을 시뮬레이션한 후 결과를 반환.

await를 사용해 두 작업의 결과를 기다린 후 출력.

이를 통해 코루틴을 사용한 비동기 처리의 간결함과 효율성을 확인할 수 있다.

## **코루틴의 전망**

코루틴은 비동기 프로그래밍의 필수 요소로 자리 잡고 있다.

특히, Kotlin을 포함한 여러 언어에서 비동기 I/O와 이벤트 기반 프로그래밍을 지원하기 위해 코루틴을 적극적으로 도입하고 있다.

MSA 환경이 많은 요즘, 비동기로 여러 서비스를 요청하는게 응답시간을 줄일 수 있는 지름길이다.

점점 더 많은 프레임워크와 라이브러리에서 코루틴을 지원하고 있으며, 앞으로도 코루틴 기반의 비동기 프로그래밍이 더 널리 사용될 전망이다.

## **코루틴의 단점**

하지만 역시 만능은 아니다. 단점이 무엇이냐

1\. **디버깅 어려움**: 비동기 작업이 복잡해지면 디버깅이 어려워질 수 있다. 특히, 예상치 못한 타이밍 문제나 레이스 컨디션(경쟁 상태)이 발생할 수 있다

2\. **복잡성 증가**: 코루틴은 코드 구조를 단순하게 만들 수 있지만, 잘못 사용하면 오히려 코드 복잡성을 증가시킬 수 있다

3\. **제한적인 사용 사례**: 모든 문제를 코루틴으로 해결할 수 있는 것은 아다. 비동기 작업에 특화되어 있어, 동기적인 작업에는 적합하지 않을 수 있다.

## **결말**

코루틴은 비동기 프로그래밍의 강력한 도구로, 효율적인 자원 사용과 간결한 코드 구조를 제공한다. 하지만 디버깅이 어려울 수 있고, 모든 경우에 적합한 것은 아니기 때문에, 상황에 맞게 적절히 활용하는 것이 중요하다. 코루틴은 앞으로 더 많은 분야에서 활용될 것이며, 비동기 프로그래밍의 핵심 요소로 자리 잡을 것으로 보인다